<!DOCTYPE html>
<html>
<head>
  <title>Best Speaker Results</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <%- include("partials/header") %>

  <div class="container">
    <div class="card">
      <h1>Best Speaker Results</h1>
      <p style="color: rgba(234,240,255,0.75);">
        Total votes: <strong><%= totalVotes %></strong>
      </p>

      <% if (!winner) { %>
        <p>No votes yet.</p>
      <% } else { %>
        <div class="card" style="margin-top:16px;">
          <h2 style="margin:0;">Winner</h2>
          <p style="margin-top:8px;">
            <strong><%= winner._id %></strong> with <strong><%= winner.votes %></strong> votes
          </p>
        </div>

        <h2 style="margin-top:18px;">Full Ranking</h2>

        <table style="width:100%; border-collapse: collapse; margin-top:10px;">
          <thead>
            <tr style="text-align:left; border-bottom: 1px solid rgba(255,255,255,0.12);">
              <th style="padding:10px 8px;">Speaker</th>
              <th style="padding:10px 8px;">Votes</th>
              <th style="padding:10px 8px;">Percent</th>
            </tr>
          </thead>
          <tbody>
            <% results.forEach(r => { %>
              <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
                <td style="padding:10px 8px;"><%= r._id %></td>
                <td style="padding:10px 8px;"><%= r.votes %></td>
                <td style="padding:10px 8px;">
                  <%= totalVotes ? Math.round((r.votes / totalVotes) * 100) : 0 %>%
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } %>

      <div class="actions" style="margin-top:16px;">
        <a class="btn" href="/dashboard">Back to Dashboard</a>
      </div>
    </div>
  </div>

</body>
</html>
